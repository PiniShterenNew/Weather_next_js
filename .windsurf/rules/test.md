---
trigger: manual
---

כללים לכתיבת בדיקות
1. כלים וספריות
Vitest: השתמש ב-vitest כמסגרת הבדיקות העיקרית
Testing Library: השתמש ב-@testing-library/react לבדיקות קומפוננטות
Jest DOM: השתמש ב-@testing-library/jest-dom למאצ'רים נוספים
2. בדיקות עם תמיכה בינלאומית
השתמש תמיד ב-renderWithIntl במקום 
render
 הרגיל מ-Testing Library
אין צורך לציין locale ו-messages אם משתמשים בברירות המחדל (אנגלית)
למוק תרגומים, השתמש ב-jest.mock('next-intl') עם אובייקט תרגומים מוגדר מראש
3. מבנה הבדיקות
ארגן בדיקות בקבוצות לוגיות עם describe
כל בדיקה צריכה להתמקד בתכונה או התנהגות אחת
השתמש בשמות בדיקות תיאוריים שמסבירים מה נבדק
הפרד בדיקות ל-UI, אינטראקציות, וטיפול בשגיאות
4. מוקים וסימולציות
השתמש ב-vi.fn() ליצירת פונקציות מוק
השתמש ב-vi.spyOn() למעקב אחר קריאות לפונקציות קיימות
נקה מוקים לפני כל בדיקה עם beforeEach ו-vi.clearAllMocks()
מוק API קריאות עם mockResolvedValue או mockRejectedValue
5. בדיקת קומפוננטות
בדוק שהקומפוננטה מרנדרת את האלמנטים הנכונים
בדוק שהקומפוננטה מגיבה כראוי לאינטראקציות משתמש
בדוק שהקומפוננטה מציגה מידע דינמי כראוי
בדוק מצבי קצה ומצבי שגיאה
6. אסינכרוניות
השתמש ב-async/await עם waitFor לבדיקת שינויים אסינכרוניים
בדוק מצבי טעינה ושגיאה בקריאות API
וודא שמצבי טעינה מתחילים ומסתיימים כראוי
7. בדיקת אירועים ואינטראקציות
השתמש ב-fireEvent להפעלת אירועים כמו קליקים ושינויי קלט
בדוק שהאירועים מפעילים את הפונקציות הנכונות
בדוק שהממשק משתנה כראוי בתגובה לאירועים
8. בדיקת הודעות ומצבי שגיאה
בדוק שהודעות שגיאה מוצגות כראוי
בדוק שהודעות Toast מופעלות במקרים המתאימים
בדוק התנהגות במקרה של כישלון API
9. בדיקת מצבי סביבה
בדוק התנהגות שונה בסביבות פיתוח וייצור (למשל, הצגת פרטי שגיאה)
שמור והחזר את מצב הסביבה המקורי אחרי הבדיקה
10. כיסוי בדיקות
שאף לכיסוי גבוה של קומפוננטות ופונקציות
בדוק במיוחד לוגיקה עסקית מורכבת
בדוק מצבי קצה ותרחישי שגיאה
11. מוקים גלובליים
מוק אובייקטים גלובליים כמו window.location או navigator.geolocation כשצריך
החזר תמיד את האובייקטים הגלובליים למצבם המקורי אחרי הבדיקה
12. בדיקות Next.js ספציפיות
בדוק שקומפוננטות מתאימות לארכיטקטורת Next.js
בדוק שקומפוננטות עובדות עם מערכת הניתוב של Next.js
בדוק שקומפוננטות עובדות עם next-intl לתמיכה בינלאומית
בדיקה לטקסט שמצופה להיות המסך חייב להיות חופף לטקסט שבאמת שמור בשפה המתאימה ב/locales